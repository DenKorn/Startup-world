Форум "Startup World"
===============================

Данный проект был создан в рамках курсовой работы и проекта в личное портфолио.

Сайт был разработан для Apache-серверов на языке PHP, базируясь на фреймворке Yii2 (Advanced template). В качестве СУБД использована MySQL.

Разработка и тестирование велось лишь с помощью локального сервера WAMP, поэтому автор не гарантирует корректную работу сайта на других серверных сборках.

Страница VK разработчика: [ссылка](https://vk.com/den_korn).

Инструкция по установке
-------------------

Изначально предполагается, что на вашем компьютере уже установлен и сконфигурирован локальный сервер WAMP и установлен Composer с плагином "Сomposer asset plugin".

1. Клонируем проект из репозитория в папку для исполнения ".../wamp/www". Для быстрого старта сайта без изменений в файлах конфигурации следует поместить проект в папку с именем "startup-forum". Таким образом, доступ к сайту с локальной машины будет осуществляться по ссылке: "http://localhost/startup-forum".

2. Из корневой директории проекта вызываем в консоли команду "composer install". Это загрузит в папку "vendor" все необходимые библиотеки.

3. Нужно создать базу данных для проекта. Для быстрого старта, запустим MySQL в консоли, введите команду:
    "CREATE DATABASE `startup_forum`
    DEFAULT CHARACTER SET utf8
    DEFAULT COLLATE utf8_general_ci".
    Это создаст БД под названием "startup_forum".

4. Нужно применить миграции для установки схемы БД в актуальное для текущей версии проекта состояние. Сделать это можно, выполнив в консоли, из корневой директории проекта, команду: "yii migrate" и подтвердив их применение.

5. Запустите команду из корня репозитория: "init", и далее выбираете подходящий вам вариант. Зависит от того, желаете ли вы потестировать сайт ('dev'), либо просто хотите его запустить, без лишних замедляющих работу дополнений ('prod').

6. В файле common/config/main-local.php настроить подключения базы данных и электронной почты:
```php
   'components' => [
           'db' => [
               'dsn' => 'mysql:host=localhost;dbname=startup_forum',
               'username' => 'root',
               'password' => '',
           ],
   
           'mailer' => [
               'transport' => [
                   'class' => 'Swift_SmtpTransport',
                   'host' => 'smtp.gmail.com',
                   'username' => 'topscrumboard@gmail.com',
                   'password' => 'ваш пароль',
                   'port' => '587',
                   'encryption' => 'tls',
               ],
           ],
       ],
```
Обратите внимание, что вам при указании другого адреса электронной почты также придется переписать указанный адрес в файле console\controllers\ForumTasksController.php. Вы легко найдете упоминания этого адреса в двух местах кода этого файла. Иначе не получится отправлять уведомления на почту!
Если вы не знаете, для чего настраивается 'transport' - читайте о настройке SMTP для отправки E-mail.

7. Назначте на cron или любой другой планировщик задач регулярное выполнение консольной команды:
 
 ```yii forum-tasks/check-old-notifications```.
 
 Рекомендуемая периодичность вызова этой команды: 1 раз в 1-3 часа. Её назначение очень важно, так как она не просто отправляет устаревающие уведомления по почте, но и очищает постепенно засоряющуюся таблицу уведомлений.

Почему сайт назван именно "Startup forum"?
-------------------

Чёрт его знает, просто первая тематика, что пришла в голову :)

Существующие на данный момент косяки и пожелания
-------------------

1. НЕДОРАБОТКА: модератор может банить вышестоящего над ним админа
2. БАГ: при развертывании ветки подсвечены все остальные сообщения (убрать подсветку и заменить словом (вы)?)
3. НЕДОРАБОТКА: БД хранит время не по UTC, а поясное (Киев).
4. НЕДОРАБОТКА: На среднем размере окна, если войти в форум (публичную часть), будучи админом, то хедер увеличивается и верстка ломается
5. БАГ: при удалении сообщения из верстки могут не пропасть вложенные в него сообщения
6. БАГ: когда ответил на чье-то сообщение, а потом загружаю подчиненную ветку, моё сообщение дублируется.
7. БАГ: со временем уведомления частично нескрываются, и образуют в верхней части блока уведомлений разрастающуюся пустую нишу
8. ПОЖЕЛАНИЕ: сделать удаление профиля;
9. ПОЖЕЛАНИЕ: выводить имя и фамилию пользователя (в том числе и в письмах), если они заданы пользователем.
10. ПОЖЕЛАНИЕ: добавить кнопки редактирования/удаления темы и включить разрешения для администраторов.
11. ПОЖЕЛАНИЕ: в переписке добавить фокус на форму ввода при ее открытии
12. ПОЖЕЛАНИЕ: добавить в лендинг, вместо генерации lorem ipsum, список из самых трендовых тем форума.
13. ПОЖЕЛАНИЕ: сделат так, чтобы при замене рабочего почтового аккаунта не пришлось менять его в других местах проекта.
14. ПОЖЕЛАНИЕ: коррекция просчета количества сообщений на кнопке открытия ветки